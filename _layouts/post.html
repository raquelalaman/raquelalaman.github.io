<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - Code thinking</title>
    <meta name="description" content="{{ page.excerpt | strip_html }}">
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ '/css/style.css' | relative_url }}">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js para sintaxis de código -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/lib/highlight.min.js"></script>
</head>
<body>
    <header>
        <nav>
            <div class="nav-content">
                <ul class="nav-links">
                    <li><a href="{{ '/' | relative_url }}">Inici</a></li>
                    <li><a href="{{ '/qui-soc.html' | relative_url }}">Qui soc</a></li>
                    <li><a href="{{ '/#projects' | relative_url }}">Projectes</a></li>
                    <li><a href="{{ '/blog.html' | relative_url }}">Blog</a></li>
                    <li><a href="{{ '/#contact' | relative_url }}">Contacte</a></li>
                </ul>
            </div>
        </nav>
        <div class="logo">
            <a href="{{ '/' | relative_url }}"><img src="{{ '/assets/images/logo.png' | relative_url }}" alt="Logo"/></a>
        </div>
        <div class="header-content">
            <h1><a href="{{ '/' | relative_url }}">Code thinking</a></h1>
            <p class="subtitle">Explorant idees i compartint coneixement</p>
        </div>
    </header>

    <main>
        <article class="post-full">
            <div class="post-full-content">
                <!-- Metadades del post -->
                <div class="post-meta">
                    <span class="post-tag">{{ page.category | default: page.tags[0] | default: 'General' }}</span>
                    <span class="post-date" data-date="{{ page.date | date: '%Y-%m-%d' }}"></span>
                    <span class="post-reading-time"></span>
                    {% if page.author %}
                    <span class="post-author">per {{ page.author }}</span>
                    {% endif %}
                </div>

                <!-- Contingut del post -->
                <div class="post-content-markdown">
                    {{ content }}
                </div>

                <!-- Navegació entre posts -->
                <div class="post-navigation">
                    {% if page.previous.url %}
                    <a href="{{ page.previous.url | relative_url }}" class="nav-previous">
                        ← {{ page.previous.title }}
                    </a>
                    {% endif %}
                    
                    <a href="{{ '/blog.html' | relative_url }}" class="nav-all">
                        Tots els posts
                    </a>
                    
                    {% if page.next.url %}
                    <a href="{{ page.next.url | relative_url }}" class="nav-next">
                        {{ page.next.title }} →
                    </a>
                    {% endif %}
                </div>
            </div>
        </article>
    </main>
   
    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://github.com/raquelalaman" title="GitHub">GH</a>
                <a href="https://www.linkedin.com/in/raquelalaman/" title="LinkedIn">IN</a>
                <a href="mailto:ralaman@xtec.cat" title="Email">@</a>
            </div>
            <p>&copy; 2025 Code thinking, de Raquel Alamán. Created with ❤ using GitHub Pages and GenAI.</p>
        </div>
    </footer>

    <script>
        // Funció per formatar data en català
        function formatDateCatalan(dateString) {
            const date = new Date(dateString);
            const months = [
                'Gener', 'Febrer', 'Març', 'Abril', 'Maig', 'Juny',
                'Juliol', 'Agost', 'Setembre', 'Octubre', 'Novembre', 'Desembre'
            ];
            
            return `${date.getDate()} ${months[date.getMonth()]}, ${date.getFullYear()}`;
        }

        // Funció per calcular el temps de lectura
        function calculateReadingTime() {
            const content = document.querySelector('.post-content-markdown');
            if (!content) return 1;

            // Comptar paraules
            const text = content.innerText || content.textContent;
            const wordCount = text.trim().split(/\s+/).length;
            
            // Velocitat de lectura mitjana: 200 paraules per minut
            const wordsPerMinute = 200;
            const readingTime = Math.ceil(wordCount / wordsPerMinute);
            
            // Mínim 1 minut
            return readingTime > 0 ? readingTime : 1;
        }

        // Highlight code blocks
        document.addEventListener('DOMContentLoaded', () => {
            // Highlight sintaxi (només si hljs està disponible i hi ha blocs de codi)
            if (typeof hljs !== 'undefined') {
                const codeBlocks = document.querySelectorAll('pre code');
                if (codeBlocks.length > 0) {
                    codeBlocks.forEach((block) => {
                        hljs.highlightElement(block);
                    });
                }
            }

            // Formatar data en català
            const dateElement = document.querySelector('.post-date');
            if (dateElement && dateElement.dataset.date) {
                dateElement.textContent = formatDateCatalan(dateElement.dataset.date);
            }

            // Mostrar temps de lectura
            const readingTimeElement = document.querySelector('.post-reading-time');
            if (readingTimeElement) {
                const minutes = calculateReadingTime();
                readingTimeElement.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg>${minutes} min de lectura`;
            }
        });
    </script>
</body>
</html>
